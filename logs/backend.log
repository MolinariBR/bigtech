
> backend-core@1.0.0 dev
> ts-node-dev --respawn --transpile-only src/index.ts

[INFO] 16:21:52 ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.9.3)
ğŸ‘‚ Handler subscribed to event: query.executed
ğŸ‘‚ Handler subscribed to event: credits.purchased
ğŸ’° Billing Engine initialized
ğŸ“¡ Event Bus initialized
ğŸ” Found plugin types: [ 'consulta', 'pagamentos' ]
ğŸ” Found plugins in consulta: [ 'bigtech', 'infosimples' ]
ğŸ” Checking plugin path: /home/mau/projeto/consulta/backend/src/plugins/consulta/bigtech/index.ts
ğŸ”„ Importing plugin: consulta-bigtech
âœ… Plugin validation passed for: bigtech
âœ… Plugin loaded: consulta-bigtech v1.0.0
âœ… Plugin validation passed for: bigtech
âœ… Plugin loaded: consulta-bigtech v1.0.0
ğŸ” Checking plugin path: /home/mau/projeto/consulta/backend/src/plugins/consulta/infosimples/index.ts
ğŸ”„ Importing plugin: consulta-infosimples
âœ… Plugin validation passed for: infosimples
âœ… Plugin loaded: consulta-infosimples v1.0.0
âœ… Plugin validation passed for: infosimples
âœ… Plugin loaded: consulta-infosimples v1.0.0
ğŸ” Found plugins in pagamentos: [ 'asaas' ]
ğŸ” Checking plugin path: /home/mau/projeto/consulta/backend/src/plugins/pagamentos/asaas/index.ts
ğŸ”„ Importing plugin: pagamentos-asaas
âœ… Plugin validation passed for: pagamento-asaas
âœ… Plugin loaded: pagamentos-asaas v1.0.0
âœ… Plugin validation passed for: pagamento-asaas
âœ… Plugin loaded: pagamentos-asaas v1.0.0
[DEV] Skipping active plugins load from database
âœ… Plugins infosimples e bigtech ativados por padrÃ£o para tenant default
ğŸ“¡ Event Bus initialized
ğŸ’° Billing Engine initialized
âœ… CORE initialized successfully
ğŸš€ BigTech CORE running on port 8080
ğŸ“Š Health check: http://localhost:8080/health
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/login
AuditLogger: created audit document {
  tenantId: 'default',
  userId: '694afb83001da8dae2b4',
  action: 'user_login',
  resource: 'user:694afb83001da8dae2b4',
  details: '{"email":"user@bigtech.com"}',
  ipAddress: 'system',
  timestamp: '2025-12-24T19:22:22.992+00:00',
  '$id': '694c3d6f5d6a86a9ba31',
  '$permissions': [],
  '$createdAt': '2025-12-24T19:22:23.383+00:00',
  '$updatedAt': '2025-12-24T19:22:23.383+00:00',
  '$sequence': 66,
  '$databaseId': 'bigtechdb',
  '$collectionId': 'audits'
}
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/login
AuditLogger: created audit document {
  tenantId: 'default',
  userId: '694afb83001da8dae2b4',
  action: 'user_login',
  resource: 'user:694afb83001da8dae2b4',
  details: '{"email":"user@bigtech.com"}',
  ipAddress: 'system',
  timestamp: '2025-12-24T19:22:41.153+00:00',
  '$id': '694c3d819d71961910c9',
  '$permissions': [],
  '$createdAt': '2025-12-24T19:22:41.645+00:00',
  '$updatedAt': '2025-12-24T19:22:41.645+00:00',
  '$sequence': 67,
  '$databaseId': 'bigtechdb',
  '$collectionId': 'audits'
}
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/login
AuditLogger: created audit document {
  tenantId: 'default',
  userId: '694afb83001da8dae2b4',
  action: 'user_login',
  resource: 'user:694afb83001da8dae2b4',
  details: '{"email":"user@bigtech.com"}',
  ipAddress: 'system',
  timestamp: '2025-12-24T19:23:03.860+00:00',
  '$id': '694c3d985652725c0057',
  '$permissions': [],
  '$createdAt': '2025-12-24T19:23:04.354+00:00',
  '$updatedAt': '2025-12-24T19:23:04.354+00:00',
  '$sequence': 68,
  '$databaseId': 'bigtechdb',
  '$collectionId': 'audits'
}
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/login
AuditLogger: created audit document {
  tenantId: 'default',
  userId: '694afb83001da8dae2b4',
  action: 'user_login',
  resource: 'user:694afb83001da8dae2b4',
  details: '{"email":"user@bigtech.com"}',
  ipAddress: 'system',
  timestamp: '2025-12-24T19:23:40.346+00:00',
  '$id': '694c3dbc8aa74f23f9f7',
  '$permissions': [],
  '$createdAt': '2025-12-24T19:23:40.568+00:00',
  '$updatedAt': '2025-12-24T19:23:40.568+00:00',
  '$sequence': 69,
  '$databaseId': 'bigtechdb',
  '$collectionId': 'audits'
}
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/refresh
[auth.refresh] incoming cookies: <no-cookie-header>
[DEV] Allowing tenant default for path /api/auth/login
AuditLogger: created audit document {
  tenantId: 'default',
  userId: '694afb83001da8dae2b4',
  action: 'user_login',
  resource: 'user:694afb83001da8dae2b4',
  details: '{"email":"user@bigtech.com"}',
  ipAddress: 'system',
  timestamp: '2025-12-24T19:24:17.924+00:00',
  '$id': '694c3de2267f0ab95216',
  '$permissions': [],
  '$createdAt': '2025-12-24T19:24:18.158+00:00',
  '$updatedAt': '2025-12-24T19:24:18.158+00:00',
  '$sequence': 70,
  '$databaseId': 'bigtechdb',
  '$collectionId': 'audits'
}
