(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[554],{1704:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenants",function(){return a(4959)}])},493:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(3759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6815:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(3759).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9475:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(3759).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},4959:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return S}});var t=a(5893),n=a(7294),i=a(8778),l=a(9346),r=a(2378),c=a(4109),d=a(5305),o=a(8860),x=a(1538),m=a(4350),h=a(1519),u=a(4940),j=a(641),p=a(9475),f=a(4270),N=a(2092),g=a(493),v=a(300),w=a(6815),y=a(1552),Z=a(1743),b=a(4235),C=a(7864),T=a(1664),k=a.n(T),E=a(4712);function S(){let[e,s]=(0,n.useState)([]),[a,T]=(0,n.useState)(!0),[S,A]=(0,n.useState)(null),[_,F]=(0,n.useState)(null),[z,O]=(0,n.useState)(!1),[D,P]=(0,n.useState)(!1),[I,X]=(0,n.useState)(null),[q,L]=(0,n.useState)(null),V=async()=>{try{T(!0);let e=await fetch("http://localhost:8080/api/admin/tenants");if(!e.ok)throw Error("Failed to load tenants");let a=await e.json();s(a.tenants||[])}catch(e){A(e instanceof Error?e.message:"Unknown error")}finally{T(!1)}};(0,n.useEffect)(()=>{V()},[]);let Y=()=>{F({id:"",name:"",status:"active",plugins:[],createdAt:new Date().toISOString().split("T")[0]}),O(!0)},M=e=>{F(e),O(!0)},B=async()=>{if(_){if(!_.name.trim()){E.Am.error("Nome do tenant \xe9 obrigat\xf3rio");return}P(!0);try{let e=_.id?"PUT":"POST",s=_.id?"http://localhost:8080/api/admin/tenants/".concat(_.id):"http://localhost:8080/api/admin/tenants";if(!(await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok)throw Error("Failed to save tenant");await V(),O(!1),F(null),E.Am.success(_.id?"Tenant atualizado com sucesso!":"Tenant criado com sucesso!")}catch(e){E.Am.error("Erro ao salvar tenant"),console.error(e)}finally{P(!1)}}},J=async s=>{let a=e.find(e=>e.id===s);if(!a)return;X(s);let t="active"===a.status?"inactive":"active";try{if(!(await fetch("http://localhost:8080/api/admin/tenants/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,status:t})})).ok)throw Error("Failed to update tenant");await V(),E.Am.success("Tenant ".concat("active"===t?"ativado":"desativado"," com sucesso!"))}catch(e){E.Am.error("Erro ao alterar status do tenant"),console.error(e)}finally{X(null)}},R=async e=>{L(e);try{if(!(await fetch("http://localhost:8080/api/admin/tenants/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete tenant");await V(),E.Am.success("Tenant exclu\xeddo com sucesso!")}catch(e){E.Am.error("Erro ao excluir tenant"),console.error(e)}finally{L(null)}};return a?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(j.Z,{className:"h-6 w-6 animate-spin"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Carregando tenants..."})]})}):S?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(p.Z,{className:"h-12 w-12 text-destructive mx-auto"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Erro ao carregar tenants"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:S}),(0,t.jsx)(i.z,{onClick:V,variant:"outline",children:"Tentar novamente"})]})}):(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4 space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Gest\xe3o de Tenants"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Gerencie organiza\xe7\xf5es e seus respectivos tenants"})]}),(0,t.jsxs)(i.z,{onClick:Y,className:"shrink-0",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Criar Tenant"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(l.ll,{className:"text-sm font-medium",children:"Total de Tenants"}),(0,t.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.length})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(l.ll,{className:"text-sm font-medium",children:"Tenants Ativos"}),(0,t.jsx)(g.Z,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>"active"===e.status).length})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(l.ll,{className:"text-sm font-medium",children:"Tenants Inativos"}),(0,t.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>"inactive"===e.status).length})})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"h-5 w-5"}),"Lista de Tenants"]})}),(0,t.jsx)(l.aY,{children:0===e.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(N.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum tenant encontrado"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Comece criando seu primeiro tenant para organizar usu\xe1rios e recursos."}),(0,t.jsxs)(i.z,{onClick:Y,children:[(0,t.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Criar Primeiro Tenant"]})]}):(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(r.iA,{children:[(0,t.jsx)(r.xD,{children:(0,t.jsxs)(r.SC,{children:[(0,t.jsx)(r.ss,{className:"w-[250px]",children:"Nome"}),(0,t.jsx)(r.ss,{className:"w-[100px]",children:"Status"}),(0,t.jsx)(r.ss,{className:"w-[200px]",children:"Plugins"}),(0,t.jsx)(r.ss,{className:"w-[150px]",children:"Criado em"}),(0,t.jsx)(r.ss,{className:"w-[100px] text-right",children:"A\xe7\xf5es"})]})}),(0,t.jsx)(r.RM,{children:e.map(e=>(0,t.jsxs)(r.SC,{children:[(0,t.jsx)(r.pj,{className:"font-medium",children:e.name}),(0,t.jsx)(r.pj,{children:(0,t.jsxs)(c.C,{variant:"active"===e.status?"default":"secondary",className:"flex items-center gap-1 w-fit",children:["active"===e.status?(0,t.jsx)(g.Z,{className:"h-3 w-3"}):(0,t.jsx)(p.Z,{className:"h-3 w-3"}),"active"===e.status?"Ativo":"Inativo"]})}),(0,t.jsx)(r.pj,{children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.plugins.length>0?e.plugins.slice(0,2).map((e,s)=>(0,t.jsx)(c.C,{variant:"outline",className:"text-xs",children:e},s)):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"Nenhum"}),e.plugins.length>2&&(0,t.jsxs)(c.C,{variant:"outline",className:"text-xs",children:["+",e.plugins.length-2]})]})}),(0,t.jsx)(r.pj,{className:"text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString("pt-BR")}),(0,t.jsx)(r.pj,{className:"text-right",children:(0,t.jsxs)(u.h_,{children:[(0,t.jsx)(u.$F,{asChild:!0,children:(0,t.jsxs)(i.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Abrir menu"}),(0,t.jsx)(v.Z,{className:"h-4 w-4"})]})}),(0,t.jsxs)(u.AW,{align:"end",className:"w-[200px]",children:[(0,t.jsx)(u.Ju,{children:"A\xe7\xf5es"}),(0,t.jsxs)(u.Xi,{onClick:()=>M(e),children:[(0,t.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,t.jsxs)(u.Xi,{onClick:()=>J(e.id),disabled:I===e.id,children:[I===e.id?(0,t.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}):"active"===e.status?(0,t.jsx)(y.Z,{className:"mr-2 h-4 w-4"}):(0,t.jsx)(Z.Z,{className:"mr-2 h-4 w-4"}),"active"===e.status?"Desativar":"Ativar"]}),(0,t.jsx)(u.VD,{}),(0,t.jsx)(u.Xi,{asChild:!0,children:(0,t.jsxs)(k(),{href:"/plugins?tenantId=".concat(e.id),className:"flex items-center",children:[(0,t.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Plugins"]})}),(0,t.jsx)(u.Xi,{asChild:!0,children:(0,t.jsxs)(k(),{href:"/billing?tenantId=".concat(e.id),className:"flex items-center",children:[(0,t.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Billing"]})}),(0,t.jsx)(u.VD,{}),(0,t.jsxs)(h.aR,{children:[(0,t.jsx)(h.vW,{asChild:!0,children:(0,t.jsxs)(u.Xi,{className:"text-destructive focus:text-destructive",onSelect:e=>e.preventDefault(),children:[(0,t.jsx)(C.Z,{className:"mr-2 h-4 w-4"}),"Excluir"]})}),(0,t.jsxs)(h._T,{children:[(0,t.jsxs)(h.fY,{children:[(0,t.jsx)(h.f$,{children:"Excluir Tenant"}),(0,t.jsxs)(h.yT,{children:['Tem certeza que deseja excluir o tenant "',e.name,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita e todos os dados associados ser\xe3o permanentemente removidos.']})]}),(0,t.jsxs)(h.xo,{children:[(0,t.jsx)(h.le,{children:"Cancelar"}),(0,t.jsx)(h.OL,{onClick:()=>R(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:q===e.id,children:q===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Excluindo..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.Z,{className:"mr-2 h-4 w-4"}),"Excluir"]})})]})]})]})]})]})})]},e.id))})]})})})]}),(0,t.jsx)(d.Vq,{open:z,onOpenChange:O,children:(0,t.jsxs)(d.cZ,{className:"sm:max-w-[425px]",children:[(0,t.jsx)(d.fK,{children:(0,t.jsx)(d.$N,{className:"flex items-center gap-2",children:(null==_?void 0:_.id)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Z,{className:"h-5 w-5"}),"Editar Tenant"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Z,{className:"h-5 w-5"}),"Criar Tenant"]})})}),_&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x._,{htmlFor:"name",children:"Nome do Tenant"}),(0,t.jsx)(o.I,{id:"name",placeholder:"Digite o nome do tenant",value:_.name,onChange:e=>F({..._,name:e.target.value}),className:_.name.trim()?"":"border-destructive"}),!_.name.trim()&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:"Nome \xe9 obrigat\xf3rio"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x._,{htmlFor:"status",children:"Status"}),(0,t.jsxs)(m.Ph,{value:_.status,onValueChange:e=>F({..._,status:e}),children:[(0,t.jsx)(m.i4,{children:(0,t.jsx)(m.ki,{})}),(0,t.jsxs)(m.Bw,{children:[(0,t.jsx)(m.Ql,{value:"active",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 text-green-600"}),"Ativo"]})}),(0,t.jsx)(m.Ql,{value:"inactive",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"}),"Inativo"]})})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x._,{htmlFor:"plugins",children:"Plugins (separados por v\xedrgula)"}),(0,t.jsx)(o.I,{id:"plugins",placeholder:"plugin1, plugin2, plugin3",value:_.plugins.join(", "),onChange:e=>F({..._,plugins:e.target.value.split(", ").filter(e=>e.trim())})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Digite os nomes dos plugins separados por v\xedrgula"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>O(!1),disabled:D,children:"Cancelar"}),(0,t.jsx)(i.z,{onClick:B,disabled:D||!(null==_?void 0:_.name.trim()),children:D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Salvar"]})})]})]})})]})}}},function(e){e.O(0,[914,313,336,888,774,179],function(){return e(e.s=1704)}),_N_E=e.O()}]);