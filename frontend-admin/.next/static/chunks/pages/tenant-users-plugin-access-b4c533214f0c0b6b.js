(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[210],{9815:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenant-users-plugin-access",function(){return a(7875)}])},641:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(3759).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9346:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},ll:function(){return o}});var r=a(5893),s=a(7294),n=a(5156);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight text-foreground",a),...s})});o.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},8860:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var r=a(5893),s=a(7294),n=a(5156);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},1538:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var r=a(5893),s=a(7294),n=a(9489),l=a(2003),i=a(5156);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-foreground"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,i.cn)(o(),a),...s})});d.displayName=n.f.displayName},2378:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var r=a(5893),s=a(7294),n=a(5156);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},7875:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var r=a(5893),s=a(7294),n=a(1163),l=a(8778),i=a(9346),o=a(2378),d=a(4109),c=a(1538),u=a(8860),f=a(641),m=a(3759);let x=(0,m.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var p=a(9176),h=a(6127);let g=(0,m.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),j=(0,m.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var N=a(4712);function w(){let e=(0,n.useRouter)(),{tenantId:t}=e.query,[a,m]=(0,s.useState)([]),[w,v]=(0,s.useState)([]),[y,b]=(0,s.useState)([]),[k,C]=(0,s.useState)(""),[T,R]=(0,s.useState)(!0),[A,E]=(0,s.useState)(!1),I=async()=>{if(t)try{let e=localStorage.getItem("accessToken"),a=await fetch("http://localhost:8080/api/admin/tenants/".concat(t,"/users"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to load tenant users");let r=await a.json();m(r.users||[])}catch(e){N.Am.error("Erro ao carregar usu\xe1rios do tenant")}},S=async()=>{if(t)try{let e=localStorage.getItem("accessToken"),a=await fetch("http://localhost:8080/api/admin/plugin-access/tenants/".concat(t,"/plugins"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to load tenant plugins");let r=await a.json();v((r.plugins||[]).map(e=>({pluginId:e.pluginId,status:e.status})))}catch(e){N.Am.error("Erro ao carregar plugins do tenant")}},_=async()=>{try{let e=localStorage.getItem("accessToken"),t=await fetch("http://localhost:8080/api/admin/plugin-access/plugins/available",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to load available plugins");let a=await t.json();b(a.plugins||[])}catch(e){N.Am.error("Erro ao carregar plugins dispon\xedveis")}},Z=async e=>{try{let t=localStorage.getItem("accessToken"),a=await fetch("http://localhost:8080/api/admin/plugin-access/users/".concat(e,"/plugins"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to load user plugins");let r=await a.json();m(t=>t.map(t=>t.id===e?{...t,allowedPlugins:(r.allowedPlugins||[]).map(e=>({pluginId:e.pluginId,allowed:!!e.allowed}))}:t))}catch(e){N.Am.error("Erro ao carregar plugins do usu\xe1rio")}},P=e=>{let t=y.find(t=>t.id===e);return(null==t?void 0:t.name)||e},z=a.filter(e=>e.email.toLowerCase().includes(k.toLowerCase())||e.name.toLowerCase().includes(k.toLowerCase()));return((0,s.useEffect)(()=>{t&&(async()=>{R(!0),await Promise.all([I(),S(),_()]),R(!1)})()},[t]),(0,s.useEffect)(()=>{a.length>0&&a.forEach(e=>{Z(e.id)})},[a.length]),T)?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)(f.Z,{className:"h-8 w-8 animate-spin"})}):t?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(l.z,{variant:"outline",onClick:()=>e.push("/plugin-access"),children:[(0,r.jsx)(x,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Usu\xe1rios do Tenant"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Controle individual de acesso a plugins por usu\xe1rio"})]})]})}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{children:"Plugins Ativos no Tenant"})}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[w.filter(e=>"active"===e.status).map(e=>(0,r.jsx)(d.C,{variant:"default",children:P(e.pluginId)},e.pluginId)),0===w.filter(e=>"active"===e.status).length&&(0,r.jsx)("p",{className:"text-muted-foreground",children:"Nenhum plugin ativo no tenant"})]})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{className:"h-5 w-5"}),"Usu\xe1rios do Tenant"]})}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(c._,{htmlFor:"search",children:"Buscar usu\xe1rio"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(u.I,{id:"search",placeholder:"Nome ou email...",value:k,onChange:e=>C(e.target.value),className:"pl-9"})]})]})}),(0,r.jsxs)(o.iA,{children:[(0,r.jsx)(o.xD,{children:(0,r.jsxs)(o.SC,{children:[(0,r.jsx)(o.ss,{children:"Usu\xe1rio"}),(0,r.jsx)(o.ss,{children:"Status"}),(0,r.jsx)(o.ss,{children:"Plugins Permitidos"}),(0,r.jsx)(o.ss,{children:"A\xe7\xf5es"})]})}),(0,r.jsx)(o.RM,{children:z.map(e=>(0,r.jsxs)(o.SC,{children:[(0,r.jsx)(o.pj,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email})]})}),(0,r.jsx)(o.pj,{children:(0,r.jsx)(d.C,{variant:"active"===e.status?"default":"secondary",children:"active"===e.status?"Ativo":"Inativo"})}),(0,r.jsx)(o.pj,{children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.allowedPlugins.filter(e=>e.allowed).map(e=>(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:P(e.pluginId)},e.pluginId)),0===e.allowedPlugins.filter(e=>e.allowed).length&&(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"Nenhum plugin permitido"})]})}),(0,r.jsx)(o.pj,{children:(0,r.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>{N.Am.info("Funcionalidade em desenvolvimento")},children:[(0,r.jsx)(g,{className:"h-4 w-4 mr-2"}),"Editar Acesso"]})})]},e.id))})]}),0===z.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(p.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:k?"Nenhum usu\xe1rio encontrado":"Nenhum usu\xe1rio no tenant"})]})]})]}),z.length>0&&(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Controle Individual de Acesso"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Selecione um usu\xe1rio para gerenciar seu acesso individual aos plugins ativos no tenant."})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(j,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Selecione um usu\xe1rio na tabela acima para gerenciar seu acesso"})]})})]})]}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Tenant n\xe3o especificado"})})}},9489:function(e,t,a){"use strict";a.d(t,{f:function(){return o}});var r=a(7294);a(3935);var s=a(8426),n=a(5893),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,s.Z8)(`Primitive.${t}`),l=r.forwardRef((e,r)=>{let{asChild:s,...l}=e,i=s?a:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(i,{...l,ref:r})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{}),i=r.forwardRef((e,t)=>(0,n.jsx)(l.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9815)}),_N_E=e.O()}]);