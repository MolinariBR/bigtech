# Projeto Bigtech — Estrutura do Projeto

---
precedence: 3
version: 1.1.0
depends_on: [1.Project.md,2.Architecture.md]
influences: [4.Entities.md,5.Pages.md,6.UserStories.md,7.Tasks.md]
last_update: 2025-12-24
---

## Índice dos Documentos

* [1.Project.md](1.Project.md) - Visão geral do projeto
* [2.Architecture.md](2.Architecture.md) - Arquitetura técnica
* [3.Structure.md](3.Structure.md) - Estrutura do projeto
* [4.Entities.md](4.Entities.md) - Modelos de dados (entidades)
* [5.Pages.md](5.Pages.md) - Páginas e interfaces
* [6.UserStories.md](6.UserStories.md) - User Stories
* [7.Tasks.md](7.Tasks.md) - Tasks de implementação
* [8.DesignSystem.md](8.DesignSystem.md) - Design System

---

## 1. Visão Geral da Estrutura

A estrutura de diretórios e arquivos do Projeto Bigtech segue uma organização **modular, escalável e orientada a plugins**, alinhada com um modelo **multi-tenant lógico em nível de aplicação** e **single-tenant em nível de infraestrutura**.

O projeto é dividido em **frontends (usuário e admin)**, **backend (CORE e plugins)**, **infraestrutura** e **documentação**.
O isolamento entre tenants ocorre **exclusivamente por regras lógicas de autenticação, autorização e dados**, e **não por containers, instâncias ou ambientes dedicados**.

* **Frontend-User**: Aplicação Next.js para usuários finais (consultas, compras, histórico).
* **Frontend-Admin**: Aplicação Next.js para administradores (gestão de usuários, organizações, plugins e billing).
* **Backend**: Núcleo em Node.js/TypeScript com sistema de plugins, integrado ao Appwrite.
* **Infraestrutura**: Docker e CI/CD para padronização de deploy e escalabilidade horizontal.
* **Plugins**: Estrutura hierárquica por tipo e fonte (ex.: `plugins/consulta/infosimples`).
* **Estilos**: Sistema de temas com `global.css`, `theme/dark.css` e `theme/light.css`.

> **Nota conceitual:**
> O sistema **não utiliza isolamento por container por tenant**. Todos os usuários compartilham a mesma infraestrutura, e o controle de acesso é feito por **userId, organizationId e regras de permissão**.

---

## 1.1 Decisões Tecnológicas

* **Frontend**: Next.js (React), Shadcn UI, Tailwind CSS, Lucide Icons
* **Backend CORE/Plugins**: Node.js / TypeScript
* **BaaS**: Appwrite
* **Containers**: Docker (infraestrutura compartilhada)
* **Banco**: MariaDB / PostgreSQL via Appwrite
* **Comunicação**: Event Bus (RabbitMQ)
* **Segurança**: JWT, rate limiting, TLS, isolamento lógico multi-tenant

---

## 2. Estrutura de Diretórios e Arquivos

```
RAIZ/
├── Docs/
│   ├── 1.Project.md
│   ├── 2.Architecture.md
│   └── 3.Structure.md
├── frontend-app/
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   ├── styles/
│   │   ├── hooks/
│   │   ├── utils/
│   │   └── lib/
│   ├── public/
│   ├── next.config.js
│   ├── package.json
│   ├── tsconfig.json
│   ├── tailwind.config.js
│   └── Dockerfile
├── frontend-admin/
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   ├── styles/
│   │   ├── hooks/
│   │   ├── utils/
│   │   └── lib/
│   ├── public/
│   ├── next.config.js
│   ├── package.json
│   ├── tsconfig.json
│   ├── tailwind.config.js
│   └── Dockerfile
├── backend/
│   ├── src/
│   │   ├── core/
│   │   │   ├── auth.ts
│   │   │   ├── tenantContext.ts
│   │   │   ├── permissions.ts
│   │   │   ├── pluginLoader.ts
│   │   │   ├── eventBus.ts
│   │   │   ├── billingEngine.ts
│   │   │   ├── audit.ts
│   │   │   └── index.ts
│   │   ├── plugins/
│   │   ├── api/
│   │   ├── utils/
│   │   └── lib/
│   ├── package.json
│   ├── tsconfig.json
│   ├── Dockerfile
│   └── docker-compose.yml
├── shared/
│   ├── types/
│   └── utils/
├── README.md
├── package.json
└── docker-compose.yml
```

---

## 3. Descrições Detalhadas

* **Docs/**: Documentação hierárquica que governa decisões técnicas e implementação.
* **Frontend-User/Admin**: Aplicações Next.js focadas em UX, com temas dark/light.
* **Backend**: CORE mínimo em Node.js com plugins modulares carregados dinamicamente.

  * **Billing Engine & APIs**:
    O `billingEngine.ts` expõe endpoints para agregação por usuário/organização/período, listagem de transações, exportação CSV/PDF e operações administrativas, consumidos pelo `frontend-admin`.
* **Plugins**: Estrutura `plugins/tipo/fonte`, ativados por configuração lógica (não por instância).
* **Infraestrutura**: Docker para padronização de deploy e escalabilidade, **sem segregação por tenant**.

  * **Observability**: Prometheus/Grafana coletando métricas do `billingEngine` e Event Bus.
* **Shared**: Tipos e utilitários compartilhados entre frontends e backend.

---

## 4. Considerações de Isolamento

O sistema opera com **infraestrutura única compartilhada**.
O isolamento ocorre exclusivamente em nível lógico, por meio de:

* Contexto de tenant autenticado
* Organização (empresa/conta)
* Regras de permissão
* Escopos de dados
* Auditoria e billing

Frontends são compartilhados e autenticados conforme o contexto do tenant.

---

## 5. Histórico de Versões

* **Versão 1.1.0** (24/12/2025): Alinhamento completo com tenancy lógico definido em 1.Project.md e 2.Architecture.md.
* **Versão 1.0** (20/12/2025): Criação inicial do documento 3.Structure.md.